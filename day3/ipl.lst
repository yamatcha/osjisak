     1                                  ; hello-os
     2                                      ORG     0x7c00          ; このプログラムがどこに読み込まれるのか
     3                                  
     4                                  ; 以下は標準的なFAT12フォーマットフロッピーディスクのための記述
     5                                  
     6 00000000 EB4E                        JMP     entry
     7 00000002 90                          DB      0x90
     8 00000003 48454C4C4F49504C            DB      "HELLOIPL"      ; ブートセクタの名前を自由に書いてよい（8バイト）
     9 0000000B 0002                        DW      512             ; 1セクタの大きさ（512にしなければいけない）
    10 0000000D 01                          DB      1               ; クラスタの大きさ（1セクタにしなければいけない）
    11 0000000E 0100                        DW      1               ; FATがどこから始まるか（普通は1セクタ目からにする）
    12 00000010 02                          DB      2               ; FATの個数（2にしなければいけない）
    13 00000011 E000                        DW      224             ; ルートディレクトリ領域の大きさ（普通は224エントリにする）
    14 00000013 400B                        DW      2880            ; このドライブの大きさ（2880セクタにしなければいけない）
    15 00000015 F0                          DB      0xf0            ; メディアのタイプ（0xf0にしなければいけない）
    16 00000016 0900                        DW      9               ; FAT領域の長さ（9セクタにしなければいけない）
    17 00000018 1200                        DW      18              ; 1トラックにいくつのセクタがあるか（18にしなければいけない）
    18 0000001A 0200                        DW      2               ; ヘッドの数（2にしなければいけない）
    19 0000001C 00000000                    DD      0               ; パーティションを使ってないのでここは必ず0
    20 00000020 400B0000                    DD      2880            ; このドライブ大きさをもう一度書く
    21 00000024 000029                      DB      0,0,0x29        ; よくわからないけどこの値にしておくといいらしい
    22 00000027 FFFFFFFF                    DD      0xffffffff      ; たぶんボリュームシリアル番号
    23 0000002B 48454C4C4F2D4F5320-         DB      "HELLO-OS   "   ; ディスクの名前（11バイト）
    23 00000034 2020               
    24 00000036 4641543132202020            DB      "FAT12   "      ; フォーマットの名前（8バイト）
    25 0000003E 00<rept>                    TIMES   18 DB 0         ; とりあえず18バイトあけておく
    26                                  
    27                                  ; プログラム本体
    28                                  
    29                                  entry:
    30 00000050 B80000                      MOV     AX,0            ; レジスタ初期化
    31 00000053 8ED0                        MOV     SS,AX
    32 00000055 BC007C                      MOV     SP,0x7c00
    33 00000058 8ED8                        MOV     DS,AX
    34 0000005A 8EC0                        MOV     ES,AX
    35                                  
    36 0000005C BE[7400]                    MOV     SI,msg
    37                                  putloop:
    38 0000005F 8A04                        MOV     AL,[SI]
    39 00000061 83C601                      ADD     SI,1            ; SIに1を足す
    40 00000064 3C00                        CMP     AL,0
    41 00000066 7409                        JE      fin
    42 00000068 B40E                        MOV     AH,0x0e         ; 一文字表示ファンクション
    43 0000006A BB0F00                      MOV     BX,15           ; カラーコード
    44 0000006D CD10                        INT     0x10            ; ビデオBIOS呼び出し
    45 0000006F EBEE                        JMP     putloop
    46                                  fin:
    47 00000071 F4                          HLT                     ; 何かあるまでCPUを停止させる
    48 00000072 EBFD                        JMP     fin             ; 無限ループ
    49                                  
    50                                  msg:
    51 00000074 0A0A                        DB      0x0a, 0x0a      ; 改行を2つ
    52 00000076 68656C6C6F6F732C20-         DB      "helloos, day2."
    52 0000007F 646179322E         
    53 00000084 0A                          DB      0x0a            ; 改行
    54 00000085 00                          DB      0
    55                                  
    56 00000086 00<rept>                    TIMES   0x7dfe-($-$$)-0x7c00 DB 0        ; 0x7dfeまでを0x00で埋める命令
    57                                  
    58 000001FE 55AA                        DB      0x55, 0xaa
    59                                  
    60                                  ; 以下はブートセクタ以外の部分の記述
    61                                  
    62 00000200 F0FFFF0000000000            DB      0xf0, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00
    63 00000208 00<rept>                    TIMES   4600 DB 0
    64 00001400 F0FFFF0000000000            DB      0xf0, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00
    65 00001408 00<rept>                    TIMES    1469432 DB 0
